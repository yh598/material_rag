FROM python:3.12-slim

ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

WORKDIR /app

COPY requirements.txt /app/requirements.txt
RUN pip install --no-cache-dir -r /app/requirements.txt

COPY ui /app/ui
COPY materials.json /app/materials.json
COPY products.json /app/products.json
COPY product_materials.json /app/product_materials.json

EXPOSE 8501

CMD [
  "python",
  "-m",
  "streamlit",
  "run",
  "ui/app.py",
  "--server.address",
  "0.0.0.0",
  "--server.port",
  "8501",
  "--server.headless",
  "true"
]
